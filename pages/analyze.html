<!doctype html>
<html lang="zh-CN">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>AI ææ¡ˆåˆ†æå™¨ - AstraCoin</title>
<style>
body { background: #0f0f23; color: #fff; font-family: Arial; padding: 20px; }
.card { background: #11131f; padding: 20px; border-radius: 10px; border: 1px solid rgba(255,255,255,0.1); }
input, textarea {
  width: 100%; padding: 12px; margin-top: 10px;
  background: #1a1d2e; border: 1px solid #333; border-radius: 8px; color: #fff;
}
button {
  background: #00ff88; color: #000; border: none; padding: 12px 18px;
  border-radius: 8px; cursor: pointer; margin-top: 15px; font-weight: bold;
}
button:hover { background: #06ffa0; }
.result { margin-top: 20px; padding: 15px; background: #11131f; border-radius: 8px; }
.back { color: #00ff88; text-decoration: none; }
</style>
</head>

<body>

<a href="/index.html" class="back">â† è¿”å›é¦–é¡µ</a>

<h1>AI ææ¡ˆåˆ†æå™¨</h1>

<div class="card">
  <label>ææ¡ˆæ ‡é¢˜ï¼š</label>
  <input id="title" placeholder="è¯·è¾“å…¥æ ‡é¢˜">

  <label style="margin-top:15px;">ææ¡ˆå†…å®¹ï¼š</label>
  <textarea id="content" rows="8" placeholder="è¯·è¾“å…¥è¯¦ç»†å†…å®¹"></textarea>

  <button onclick="analyze()">æäº¤åˆ†æ</button>
</div>

<div id="output"></div>

<script>
async function analyze() {
  const t = document.getElementById("title").value.trim();
  const c = document.getElementById("content").value.trim();

  if (!t || !c) {
    alert("è¯·è¾“å…¥æ ‡é¢˜ä¸å†…å®¹ï¼");
    return;
  }

  const box = document.getElementById("output");
  box.innerHTML = "<div class='result'>æ­£åœ¨åˆ†æä¸­ï¼Œè¯·ç¨ç­‰...</div>";

  const res = await fetch("/api/analyze", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ title: t, content: c })
  });

  const j = await res.json();

  if (!j.ok) {
    box.innerHTML = "<div class='result'>AI åˆ†æå¤±è´¥ï¼Œè¯·æ£€æŸ¥æœåŠ¡å™¨æ—¥å¿—ã€‚</div>";
    return;
  }

  const p = j.proposal;

  box.innerHTML = `
    <div class="result">
      <h3>åˆ†æå®Œæˆ</h3>
      <p><b>åˆ†ç±»ï¼š</b> ${p.category}</p>
      <p><b>æ‘˜è¦ï¼š</b> ${p.summary}</p>
      <p><b>IDï¼š</b> ${p.id}</p>
      <p><a style="color:#00ff88" href="/proposal.html?id=${p.id}">ğŸ‘‰ ç‚¹å‡»æŸ¥çœ‹ææ¡ˆè¯¦æƒ…</a></p>
    </div>
  `;
}
</script>

</body>
</html>